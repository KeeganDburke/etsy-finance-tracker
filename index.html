<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lux Finance Tracker Pro</title>
</head>
<body>
    <h2>Sign Up for the Waitlist</h2>
    <form id="waitlist-form">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <br>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <br>
        
        <label for="price">Price Choice:</label>
        <select id="price" name="price" required>
            <option value="$9/month">$9/month</option>
            <option value="$99/year">$99/year</option>
        </select>
        <br>
        
        <label>Challenges:</label><br>
        <input type="checkbox" name="challenge" value="Tracking sales & expenses"> Tracking sales & expenses<br>
        <input type="checkbox" name="challenge" value="Etsy fees & taxes"> Etsy fees & taxes<br>
        <input type="checkbox" name="challenge" value="Other" id="other-checkbox" onclick="showOtherTextbox(this)"> Other<br>
        <input type="text" id="other-textbox" name="other" style="display:none;" placeholder="Specify other challenge">
        <br>
        
        <button type="submit">Join Waitlist</button>
    </form>
    
    <script>
        function showOtherTextbox(checkBox) {
            var otherTextbox = document.getElementById("other-textbox");
            if (checkBox.checked) {
                otherTextbox.style.display = "block";
            } else {
                otherTextbox.style.display = "none";
            }
        }
        
        document.getElementById("waitlist-form").addEventListener("submit", async function(event) {
            event.preventDefault();
            
            const name = document.getElementById("name").value.trim();
            const email = document.getElementById("email").value.trim();
            const price_choice = document.getElementById("price").value;
            const challenge = Array.from(document.querySelectorAll("input[name='challenge']:checked"))
                .map(input => input.value.trim());
            const other = document.getElementById("other-textbox").value.trim();
            
            if (!name || !email || !price_choice || challenge.length === 0) {
                alert("Please fill out all fields before submitting.");
                return;
            }
            
            const formData = {
                name,
                email,
                price_choice,
                challenge,
                other,
                timestamp: new Date().toISOString()
            };
            
            try {
                const response = await fetch("https://script.google.com/macros/s/AKfycbxLdg4F0JwMmxGLq2iBa3FU4_hoOpIcGtQKkPIt2eaB46JWlo38GJlQJ1ONLtqJecfK7A/exec", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                if (result.success) {
                    alert("✅ Thank you for signing up!");
                    document.getElementById("waitlist-form").reset();
                } else {
                    throw new Error("Submission failed");
                }
            } catch (error) {
                console.error("❌ Error adding document:", error);
                alert("There was an issue with your submission. Please try again.");
            }
        });
    </script>
</body>
</html>
